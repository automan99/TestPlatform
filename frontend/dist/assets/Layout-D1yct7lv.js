import{z as p,A as q,B as G,d as h,o as m,w as e,C as J,u as K,D as O,b as t,G as Q,l as c,H as U,p as X,q as n,x as I,t as o,I as Y,J as Z,K as $,L as ee,k as l,M as te,N as ne,O as ae,P as se,Q as oe,s as k,R as le,S as de,j as ue,T as re,U as ie,V as ce,e as w,W as _e,X as me,Y as fe,Z as pe,c as he,F as ve,m as we,_ as be,$ as ge,a0 as xe,a1 as ye,y as L}from"./index-vTAAATWV.js";/* empty css                */import"./index-BRBj6Fej.js";/* empty css                   *//* empty css               */import{u as Te,a as Ee}from"./index-j7d3t5fE.js";import{u as Se}from"./tenant-CEzwzZBB.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ie={class:"logo"},ke={class:"header-left"},Le={class:"header-right"},Me={class:"tenant-info"},Be={class:"tenant-name"},ze={class:"user-info"},De={__name:"Layout",setup(Ne){const b=q(),g=K(),f=Te(),{t:s}=Ee(),r=Se(),M=p(()=>b.path),x=p(()=>b.meta),B=p(()=>f.isSidebarCollapsed?"64px":"200px"),y=p(()=>{var d;return(d=r.currentTenant)==null?void 0:d.id}),z=p(()=>{var d;return((d=r.currentTenant)==null?void 0:d.name)||s("tenant.switchTenant")});async function D(d){var i,a;try{await r.setCurrentTenant(d),L.success(s("tenant.switchSuccess")),g.push("/dashboard")}catch(u){L.error(((a=(i=u.response)==null?void 0:i.data)==null?void 0:a.message)||s("tenant.switchFailed"))}}function N(){f.logout(),g.push("/login")}return G(async()=>{if(await r.loadMyTenants(),!r.currentTenant&&r.tenantList.length>0){const d=localStorage.getItem("currentTenantId");if(d){const i=r.tenantList.find(a=>a.id===parseInt(d));i&&(r.currentTenant=i)}}}),(d,i)=>{const a=X,u=$,R=Z,V=Q,A=ue,T=_e,j=ce,F=ge,v=be,E=pe,S=me,P=de,H=O("router-view"),W=ye,C=J;return m(),h(C,{class:"layout-container"},{default:e(()=>[t(V,{width:B.value,class:"sidebar"},{default:e(()=>[c("div",Ie,[t(a,{size:24},{default:e(()=>[t(n(I))]),_:1}),U(c("span",null,o(n(s)("dashboard.title")),513),[[Y,!n(f).isSidebarCollapsed]])]),t(R,{"default-active":M.value,collapse:n(f).isSidebarCollapsed,router:"",class:"sidebar-menu"},{default:e(()=>[t(u,{index:"/dashboard"},{title:e(()=>[l(o(n(s)("menu.home")),1)]),default:e(()=>[t(a,null,{default:e(()=>[t(n(ee))]),_:1})]),_:1}),t(u,{index:"/test-cases"},{title:e(()=>[l(o(n(s)("menu.testCases")),1)]),default:e(()=>[t(a,null,{default:e(()=>[t(n(te))]),_:1})]),_:1}),t(u,{index:"/test-plans"},{title:e(()=>[l(o(n(s)("menu.testPlans")),1)]),default:e(()=>[t(a,null,{default:e(()=>[t(n(ne))]),_:1})]),_:1}),t(u,{index:"/environments"},{title:e(()=>[l(o(n(s)("menu.environments")),1)]),default:e(()=>[t(a,null,{default:e(()=>[t(n(I))]),_:1})]),_:1}),t(u,{index:"/defects"},{title:e(()=>[l(o(n(s)("menu.defects")),1)]),default:e(()=>[t(a,null,{default:e(()=>[t(n(ae))]),_:1})]),_:1}),t(u,{index:"/reports"},{title:e(()=>[l(o(n(s)("menu.reports")),1)]),default:e(()=>[t(a,null,{default:e(()=>[t(n(se))]),_:1})]),_:1}),t(u,{index:"/projects"},{title:e(()=>[l(o(n(s)("project.title")),1)]),default:e(()=>[t(a,null,{default:e(()=>[t(n(oe))]),_:1})]),_:1}),t(u,{index:"/tenants"},{title:e(()=>[l(o(n(s)("tenant.title")),1)]),default:e(()=>[t(a,null,{default:e(()=>[t(n(k))]),_:1})]),_:1}),t(u,{index:"/settings"},{title:e(()=>[l(o(n(s)("menu.settings")),1)]),default:e(()=>[t(a,null,{default:e(()=>[t(n(le))]),_:1})]),_:1})]),_:1},8,["default-active","collapse"])]),_:1},8,["width"]),t(C,null,{default:e(()=>[t(P,{class:"header"},{default:e(()=>[c("div",ke,[t(A,{icon:n(f).isSidebarCollapsed?n(re):n(ie)},null,8,["icon"]),t(j,{separator:"/"},{default:e(()=>{var _;return[t(T,{to:{path:"/"}},{default:e(()=>[l(o(n(s)("menu.home")),1)]),_:1}),(_=x.value)!=null&&_.title?(m(),h(T,{key:0},{default:e(()=>[l(o(x.value.title),1)]),_:1})):w("",!0)]}),_:1})]),c("div",Le,[n(r).tenantList.length>0?(m(),h(S,{key:0,onCommand:D},{dropdown:e(()=>[t(E,null,{default:e(()=>[(m(!0),he(ve,null,we(n(r).tenantList,_=>(m(),h(v,{key:_.id,command:_.id,disabled:_.id===y.value},{default:e(()=>[l(o(_.name)+" ",1),_.id===y.value?(m(),h(F,{key:0,size:"small",type:"success",style:{"margin-left":"8px"}},{default:e(()=>[l(o(n(s)("tenant.currentTenant")),1)]),_:1})):w("",!0)]),_:2},1032,["command","disabled"]))),128))]),_:1})]),default:e(()=>[c("div",Me,[t(a,{size:18},{default:e(()=>[t(n(k))]),_:1}),c("span",Be,o(z.value),1),t(a,{size:12},{default:e(()=>[t(n(fe))]),_:1})])]),_:1})):w("",!0),i[1]||(i[1]=c("div",{style:{width:"1px",height:"24px",background:"#e4e7ed"}},null,-1)),t(S,null,{dropdown:e(()=>[t(E,null,{default:e(()=>[t(v,null,{default:e(()=>[l(o(n(s)("common.edit"))+" Profile",1)]),_:1}),t(v,{divided:"",onClick:N},{default:e(()=>[l(o(n(s)("common.back")),1)]),_:1})]),_:1})]),default:e(()=>[c("div",ze,[t(a,{size:20},{default:e(()=>[t(n(xe))]),_:1}),i[0]||(i[0]=c("span",null,"Admin",-1))])]),_:1})])]),_:1}),t(W,{class:"main-content"},{default:e(()=>[t(H)]),_:1})]),_:1})]),_:1})}}},qe=Ce(De,[["__scopeId","data-v-f1bc9dc2"]]);export{qe as default};
