import{a7 as g,r as s}from"./index-vTAAATWV.js";import{r as a}from"./index-BRBj6Fej.js";const o={getList:t=>a.get("/tenants",{params:t}),getDetail:t=>a.get(`/tenants/${t}`),create:t=>a.post("/tenants",t),update:(t,r)=>a.put(`/tenants/${t}`,r),delete:t=>a.delete(`/tenants/${t}`),getUsers:t=>a.get(`/tenants/${t}/users`),switch:t=>a.post("/tenants/switch",{tenant_id:t}),getMyTenants:()=>a.get("/tenants/my")},m=g("tenant",()=>{const t=s(null),r=s([]);async function c(){var n;try{const e=await o.getMyTenants();return r.value=((n=e.data)==null?void 0:n.tenants)||[],e.data}catch(e){return console.error("Failed to load tenants:",e),null}}async function u(n){try{const e=await o.switch(n);return t.value=e.data,localStorage.setItem("currentTenantId",n),e.data}catch(e){throw console.error("Failed to switch tenant:",e),e}}function l(){if(!t.value){const n=localStorage.getItem("currentTenantId");if(n){const e=r.value.find(d=>d.id===parseInt(n));e&&(t.value=e)}}return t.value}function i(){t.value=null,localStorage.removeItem("currentTenantId")}return{currentTenant:t,tenantList:r,loadMyTenants:c,setCurrentTenant:u,getCurrentTenant:l,clearCurrentTenant:i}});export{o as t,m as u};
